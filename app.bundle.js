!function(e){var t={};function o(l){if(t[l])return t[l].exports;var n=t[l]={i:l,l:!1,exports:{}};return e[l].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(l,n,function(t){return e[t]}.bind(null,n));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t){e.exports=(e,t)=>4===t?128*(e-1):32===t?16*(e-1):void 0},function(e,t){e.exports=(e,t)=>4===t?128*(e-1):32===t?16*(e-1):void 0},function(e,t,o){"use strict";o.r(t);const l=o(0),n=o(1);function a(e,t,o,a){const c=l(e,a),s=n(t,a);o.beginPath(),o.fillRect(c,s,526/a,526/a),o.fill()}(()=>{let e,t,o,l=4;const n=document.getElementsByClassName("myCanvas")[0],c=n.getContext("2d");function s(){const e=this.response,t=JSON.parse(e),o=Object.values(t);let l;for(let e=0;e<4;e+=1)for(let t=0;t<4;t+=1)l=`#${o[e][t]}`,c.fillStyle=l,c.fillRect(128*e,128*t,128,128)}function r(){const e=this.response,t=JSON.parse(e),o=Object.values(t);let l;for(let e=0;e<32;e+=1)for(let t=0;t<32;t+=1)l=`RGBA(${o[e][t]})`,c.fillStyle=l,c.fillRect(16*e,16*t,16,16)}document.getElementsByClassName("clear")[0].addEventListener("click",()=>{c.clearRect(0,0,512,512)}),document.getElementsByClassName("size4")[0].addEventListener("click",()=>{const e=new XMLHttpRequest;e.addEventListener("load",s),e.open("GET","./src/data/4x4.json"),e.send()}),document.getElementsByClassName("size32")[0].addEventListener("click",()=>{const e=new XMLHttpRequest;e.addEventListener("load",r),e.open("GET","./src/data/32x32.json"),e.send()}),document.getElementsByClassName("image")[0].addEventListener("click",()=>{const e=new Image;e.onload=function(){c.drawImage(e,0,0,512,512)},e.src="./src/images/image.png"});const d=document.getElementsByClassName("paint-btn")[0],i=document.getElementsByClassName("pick-btn")[0],m=document.getElementsByClassName("pen-btn")[0];if(localStorage.getItem("mode")){if(e=localStorage.getItem("mode"),localStorage.getItem("selected")){const e=localStorage.getItem("selected");document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),document.getElementsByClassName(e)[0].parentElement.classList.toggle("clicked")}}else e="pen",m.classList.add("clicked");if(localStorage.getItem("canvas")){const e=localStorage.getItem("canvas"),t=new Image;t.src=e,t.onload=function(){c.drawImage(t,0,0)}}const g=()=>{e="paint",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),d.parentElement.classList.add("clicked"),localStorage.setItem("mode","paint"),localStorage.setItem("selected","paint-btn")},u=t=>{e="colPicker",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),i.parentElement.classList.add("clicked"),t.stopPropagation(),localStorage.setItem("mode","colPicker"),localStorage.setItem("selected","pick-btn")},f=()=>{e="pen",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),m.parentElement.classList.add("clicked"),localStorage.setItem("mode","pen"),localStorage.setItem("selected","pen-btn")};i.addEventListener("click",u),m.addEventListener("click",f),d.addEventListener("click",g);const p=document.getElementsByClassName("cur-col-btn")[0];localStorage.getItem("currentColor")?(o=localStorage.getItem("currentColor"),p.style.backgroundColor=o):o=getComputedStyle(p).backgroundColor;const y=document.getElementsByClassName("prev-col-btn")[0];p.addEventListener("input",(function(){const e=o;o=this.value,p.style.backgroundColor=o,y.style.backgroundColor=e,t=e,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)})),localStorage.getItem("prevColor")?(t=localStorage.getItem("prevColor"),y.style.backgroundColor=t):t=getComputedStyle(y).backgroundColor;document.getElementsByClassName("red-btn")[0].addEventListener("click",()=>{if("colPicker"===e)return;const l=o;o="#ff0000",p.style.backgroundColor=o,t=l,y.style.backgroundColor=l,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)});document.getElementsByClassName("blue-btn")[0].addEventListener("click",()=>{if("colPicker"===e)return;const l=o;o="#41b6f7",p.style.backgroundColor=o,y.style.backgroundColor=l,t=l,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)});document.addEventListener("click",l=>{if("colPicker"===e&&l.target!==n){const e=o,n=window.getComputedStyle(l.target);o=n.backgroundColor,p.style.backgroundColor=o,y.style.backgroundColor=e,t=e,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)}});const C=document.getElementsByClassName("matrix4")[0],k=document.getElementsByClassName("matrix32")[0],v=e=>{e.target===C&&(l=4,document.getElementsByClassName("selected")[0].classList.toggle("selected"),C.classList.add("selected")),e.target===k&&(l=32,document.getElementsByClassName("selected")[0].classList.toggle("selected"),k.classList.add("selected"))};C.addEventListener("click",v),k.addEventListener("click",v);let b,E,S,L,I,B,N=!1;const P=(e,t,o)=>{e>512&&(e=512),t>512&&(t=512),4===o&&(b=Math.ceil(e/128),E=Math.ceil(t/128)),32===o&&(b=Math.ceil(e/16),E=Math.ceil(t/16))};n.addEventListener("mousedown",()=>{c.fillStyle=o,"paint"===e&&(N=!0,c.fillRect(0,0,512,512),localStorage.setItem("canvas",n.toDataURL())),"pen"===e&&(N=!0,S=void 0,L=void 0)}),n.addEventListener("mouseup",(function(){"pen"===e&&(N=!1,S=void 0,I=void 0,L=void 0,B=void 0,localStorage.setItem("canvas",n.toDataURL()))})),n.addEventListener("mousemove",t=>{"pen"===e&&!0===N&&(I=t.pageX-n.offsetLeft,B=t.pageY-n.offsetTop,P(I,B,l),a(b,E,c,l),S&&L&&function(e,t,o,n,s){const r=Math.abs(t-e),d=Math.abs(n-o);let i=0,m=d/r,g=o,u=n-o;if(u>0&&(u=1),u<0&&(u=-1),e<t)for(let o=e;o<=t;o+=1)P(o,g,l),a(b,E,s,l),(i+=m)>=.5&&(g+=u,i-=1);else if(e>t)for(let o=e;o>=t;o-=1)P(o,g,l),a(b,E,s,l),(i+=m)>=.5&&(g+=u,i-=1);if(d>r){m=r/d;let s=e,u=t-e;if(u>0&&(u=1),u<0&&(u=-1),o<n)for(g=o;g<=n;g+=1)P(s,g,l),a(b,E,c,l),(i+=m)>=.5&&(s+=u,i-=1);else if(o>n)for(g=o;g>=n;g-=1)P(s,g,l),a(b,E,c,l),(i+=m)>=.5&&(s+=u,i-=1)}}(S,I,L,B,c),S=I,L=B)}),n.addEventListener("mousedown",(function(l){const a=o;if("colPicker"===e){const e=l.pageX-n.offsetLeft,s=l.pageY-n.offsetTop,r=c.getImageData(e,s,1,1).data,d=r[0],i=r[1],m=r[2];0===r[3]?(o="RGBA(245,245,220,1)",p.style.backgroundColor=o,y.style.backgroundColor=a,t=a,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)):(o=`RGB(${d},${i},${m})`,p.style.backgroundColor=o,y.style.backgroundColor=a,t=a,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t))}}));document.getElementById("body").addEventListener("keyup",e=>{"b"===e.key&&g(),"p"===e.key&&f(),"c"===e.key&&u()})})()}]);
//# sourceMappingURL=app.bundle.js.map